webpackJsonp([9],{"0pu5":function(t,i){},"5/rZ":function(t,i,e){"use strict";i.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fpsLock:60},e=i.fpsLock,n=i.debug,h=0,r=!0,a=+(1e3/e).toFixed(2);return document.addEventListener("visibilitychange",function(t){r="hidden"!==document.visibilityState}),window.animationFrameId=requestAnimationFrame(function i(e){r&&(function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=i-h;if(e>a){var r={timeCounter:h=Math.floor(i),animationFrameId:window.animationFrameId};n&&(r.fps=Math.ceil(1e3/e)),t(r)}}(e),window.animationFrameId=requestAnimationFrame(i))}),window.animationFrameId}},XqU5:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("5/rZ"),h=e("JaHG"),r=e.e(13).then(e.bind(null,"RwNA")),a=h.b||{},o={data:function(){return{fpsLock:25,debug:!0,can:{},ctx:null,videoEle:{},htmlArr:[],textAreaArr:[],showArr:[],vData:r||{},charNode:"",lineHeight:1,picIndex:0,dir:-1,allData:!1,showText:"",showCode:"",showType:""}},mounted:function(){this.videoEle=this.$refs.video,r.arr?(this.allData=!0,this.showArr=r.arr,Object(n.a)(this.loop,{fpsLock:this.fpsLock,debug:this.debug})):(this.showArr=this.htmlArr,this.initCan(),this.loadVideo())},methods:{loop:function(t){this.vData.arr||this.allData||this.drawCan();var i=this.debug?"FPS: "+t.fps+" --- ":"";this.showText=""+i,this.render()},render:function(){var t=this.showArr;this.showCode=t[this.picIndex++],this.showChar=t[this.picIndex++],this.picIndex>=t.length-1&&(this.picIndex=0)},initCan:function(){this.can=this.$refs.can,this.ctx=this.can.getContext("2d")},loadVideo:function(){var t=this;this.videoEle.addEventListener("play",function(i){Object(n.a)(t.loop,{fpsLock:t.fpsLock,debug:t.debug}),t.videoEle.width=t.videoEle.videoWidth,t.videoEle.height=t.videoEle.videoHeight}),this.videoEle.addEventListener("ended",function(i){console.log("end"),t.allData=!0,window.htmlArr=t.htmlArr})},drawCan:function(){var t=this.can,i=this.ctx,e=this.videoEle;e.width>e.videoHeight?t.width=e.width>150?150:e.width:t.width=e.width>50?50:e.width,t.height=.63*t.width*e.height/e.width,window.videoEle=e,i.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height);var n=i.getImageData(0,0,t.width,t.height);this.takehtmlArr(n)},takehtmlArr:function(t){for(var i=[],e=0,n=t.data,h=n.length;e<h;e+=4){if(0!==n[e+3]){var r=this.getText((n[e]+n[e+1]+n[e+2])/3);i[e]=r}else i[e]=a[0];Math.floor(e/4)%t.width==t.width-1&&(i[e]=a[0]+"\n")}this.charNode=i.join(""),this.textAreaArr.push(this.charNode),this.htmlArr.push(this.charNode.replace(/\n/g,"</br>")),window.htmlArr=this.htmlArr,window.textAreaArr=this.textAreaArr},getText:function(t){t=255-t;var i="";for(var e in a){if(!(e<=t))return i;i=a[e]}return i}}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"code-pic-wrap"},[e("p",[t._v(t._s(t.showText))]),t._v(" "),e("div",{staticClass:"can-box"}),t._v(" "),e("div",{staticClass:"char_box",style:{"line-height":t.lineHeight}},[e("tt",{domProps:{innerHTML:t._s(t.showCode)}})],1)])},staticRenderFns:[]};var s=e("VU/8")(o,d,!1,function(t){e("0pu5")},"data-v-f840f708",null);i.default=s.exports}});